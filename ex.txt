package main

import (
    "bytes"
    "fmt"
    "io"
    "mime/multipart"
    "net/http"
)

func main() {
    // Audio file bytes
    audioBytes := []byte{ /* Your audio file bytes here */ }

    // Create a buffer to store the request body
    var requestBody bytes.Buffer
    writer := multipart.NewWriter(&requestBody)

    // Add the audio file to the request body
    part, err := writer.CreateFormFile("file", "audio.mp3")
    if err != nil {
        fmt.Println("Error creating form file:", err)
        return
    }
    if _, err := io.Copy(part, bytes.NewReader(audioBytes)); err != nil {
        fmt.Println("Error copying audio file:", err)
        return
    }

    // Close the writer to finalize the request body
    if err := writer.Close(); err != nil {
        fmt.Println("Error closing writer:", err)
        return
    }

    // Create the HTTP request
    request, err := http.NewRequest("POST", "https://api.shuttleai.app/v1/audio/transcriptions", &requestBody)
    if err != nil {
        fmt.Println("Error creating request:", err)
        return
    }
    request.Header.Set("Authorization", "Bearer shuttle-i3u9de8bei5cq5os3edy")
    request.Header.Set("Content-Type", writer.FormDataContentType())

    // Send the request
    client := &http.Client{}
    response, err := client.Do(request)
    if err != nil {
        fmt.Println("Error sending request:", err)
        return
    }
    defer response.Body.Close()

    // Print the response
    fmt.Println("Response Status:", response.Status)
}
